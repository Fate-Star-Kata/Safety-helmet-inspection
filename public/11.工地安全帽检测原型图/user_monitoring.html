<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å®æ—¶ç›‘æ§ - å·¥åœ°å®‰å…¨å¸½æ£€æµ‹ç³»ç»Ÿ</title>
    <link rel="stylesheet" href="styles.css">
    <style>
        .monitoring-grid {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 2rem;
            margin-bottom: 2rem;
        }
        
        .camera-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1rem;
        }
        
        .camera-card {
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }
        
        .camera-header {
            background: #667eea;
            color: white;
            padding: 1rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .camera-status {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .status-dot {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background: #4CAF50;
            animation: pulse 2s infinite;
        }
        
        .detection-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            pointer-events: none;
        }
        
        .detection-box {
            position: absolute;
            border: 3px solid #4CAF50;
            background: rgba(76, 175, 80, 0.1);
        }
        
        .detection-box.no-helmet {
            border-color: #f44336;
            background: rgba(244, 67, 54, 0.1);
        }
        
        .detection-label {
            position: absolute;
            top: -25px;
            left: 0;
            background: #4CAF50;
            color: white;
            padding: 2px 8px;
            font-size: 12px;
            border-radius: 3px;
        }
        
        .detection-label.no-helmet {
            background: #f44336;
        }
        
        @media (max-width: 768px) {
            .monitoring-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <!-- å¯¼èˆªæ  -->
    <nav class="navbar">
        <div class="nav-container">
            <a href="#" class="logo">ğŸ—ï¸ å®‰å…¨å¸½æ£€æµ‹ç³»ç»Ÿ</a>
            <ul class="nav-menu">
                <li><a href="user_index.html">é¦–é¡µ</a></li>
                <li><a href="user_monitoring.html" class="active">å®æ—¶ç›‘æ§</a></li>
                <li><a href="user_warning_history.html">è­¦å‘Šè®°å½•</a></li>
                <li><a href="user_statistics.html">ç»Ÿè®¡ä¿¡æ¯</a></li>
                <li><a href="#" onclick="logout()">é€€å‡ºç™»å½•</a></li>
            </ul>
        </div>
    </nav>

    <!-- ä¸»è¦å†…å®¹ -->
    <div class="container">
        <div class="card">
            <h1>ğŸ“¹ å®æ—¶ç›‘æ§</h1>
            <p>å®æ—¶ç›‘æ§å·¥åœ°å®‰å…¨å¸½ä½©æˆ´æƒ…å†µï¼ŒåŸºäºYOLOv11ç®—æ³•è¿›è¡Œæ™ºèƒ½æ£€æµ‹</p>
        </div>

        <!-- ç›‘æ§å¸ƒå±€ -->
        <div class="monitoring-grid">
            <!-- æ‘„åƒå¤´ç›‘æ§åŒºåŸŸ -->
            <div>
                <div class="camera-grid">
                    <!-- æ‘„åƒå¤´1 -->
                    <div class="camera-card">
                        <div class="camera-header">
                            <span>ğŸ“¹ æ‘„åƒå¤´ #1 - ä¸»å…¥å£</span>
                            <div class="camera-status">
                                <div class="status-dot"></div>
                                <span>åœ¨çº¿</span>
                            </div>
                        </div>
                        <div class="video-container" style="position: relative;">
                            <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjY2NjIi8+CiAgPHRleHQgeD0iNTAlIiB5PSI1MCUiIGZvbnQtZmFtaWx5PSJBcmlhbCwgc2Fucy1zZXJpZiIgZm9udC1zaXplPSIxOCIgZmlsbD0iIzMzMyIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZHk9Ii4zZW0iPuWunuaXtuebkeaOp+eUu+mdojwvdGV4dD4KPC9zdmc+" 
                                 alt="å®æ—¶ç›‘æ§ç”»é¢" class="video-stream">
                            <!-- æ£€æµ‹æ¡†è¦†ç›–å±‚ -->
                            <div class="detection-overlay">
                                <div class="detection-box" style="top: 20%; left: 30%; width: 15%; height: 25%;">
                                    <div class="detection-label">å®‰å…¨å¸½ 98%</div>
                                </div>
                                <div class="detection-box no-helmet" style="top: 40%; left: 60%; width: 18%; height: 30%;">
                                    <div class="detection-label no-helmet">æœªæˆ´å®‰å…¨å¸½ 95%</div>
                                </div>
                            </div>
                            <div class="video-overlay">
                                æ£€æµ‹ä¸­... <div class="loading"></div>
                            </div>
                        </div>
                    </div>

                    <!-- æ‘„åƒå¤´2 -->
                    <div class="camera-card">
                        <div class="camera-header">
                            <span>ğŸ“¹ æ‘„åƒå¤´ #2 - æ–½å·¥åŒºA</span>
                            <div class="camera-status">
                                <div class="status-dot"></div>
                                <span>åœ¨çº¿</span>
                            </div>
                        </div>
                        <div class="video-container" style="position: relative;">
                            <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjY2NjIi8+CiAgPHRleHQgeD0iNTAlIiB5PSI1MCUiIGZvbnQtZmFtaWx5PSJBcmlhbCwgc2Fucy1zZXJpZiIgZm9udC1zaXplPSIxOCIgZmlsbD0iIzMzMyIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZHk9Ii4zZW0iPuWunuaXtuebkeaOp+eUu+mdojwvdGV4dD4KPC9zdmc+" 
                                 alt="å®æ—¶ç›‘æ§ç”»é¢" class="video-stream">
                            <div class="detection-overlay">
                                <div class="detection-box" style="top: 25%; left: 20%; width: 12%; height: 20%;">
                                    <div class="detection-label">å®‰å…¨å¸½ 96%</div>
                                </div>
                                <div class="detection-box" style="top: 35%; left: 45%; width: 14%; height: 25%;">
                                    <div class="detection-label">å®‰å…¨å¸½ 92%</div>
                                </div>
                            </div>
                            <div class="video-overlay">
                                æ£€æµ‹ä¸­... <div class="loading"></div>
                            </div>
                        </div>
                    </div>

                    <!-- æ‘„åƒå¤´3 -->
                    <div class="camera-card">
                        <div class="camera-header">
                            <span>ğŸ“¹ æ‘„åƒå¤´ #3 - æ–½å·¥åŒºB</span>
                            <div class="camera-status">
                                <div class="status-dot" style="background: #FF9800;"></div>
                                <span>è­¦å‘Š</span>
                            </div>
                        </div>
                        <div class="video-container" style="position: relative;">
                            <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjY2NjIi8+CiAgPHRleHQgeD0iNTAlIiB5PSI1MCUiIGZvbnQtZmFtaWx5PSJBcmlhbCwgc2Fucy1zZXJpZiIgZm9udC1zaXplPSIxOCIgZmlsbD0iIzMzMyIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZHk9Ii4zZW0iPuWunuaXtuebkeaOp+eUu+mdojwvdGV4dD4KPC9zdmc+" 
                                 alt="å®æ—¶ç›‘æ§ç”»é¢" class="video-stream">
                            <div class="detection-overlay">
                                <div class="detection-box no-helmet pulse" style="top: 30%; left: 40%; width: 20%; height: 35%;">
                                    <div class="detection-label no-helmet">æœªæˆ´å®‰å…¨å¸½ 97%</div>
                                </div>
                            </div>
                            <div class="video-overlay" style="background: rgba(255,0,0,0.8);">
                                âš ï¸ æ£€æµ‹åˆ°è¿è§„
                            </div>
                        </div>
                    </div>

                    <!-- æ‘„åƒå¤´4 -->
                    <div class="camera-card">
                        <div class="camera-header">
                            <span>ğŸ“¹ æ‘„åƒå¤´ #4 - ææ–™åŒº</span>
                            <div class="camera-status">
                                <div class="status-dot"></div>
                                <span>åœ¨çº¿</span>
                            </div>
                        </div>
                        <div class="video-container">
                            <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjMwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjY2NjIi8+CiAgPHRleHQgeD0iNTAlIiB5PSI1MCUiIGZvbnQtZmFtaWx5PSJBcmlhbCwgc2Fucy1zZXJpZiIgZm9udC1zaXplPSIxOCIgZmlsbD0iIzMzMyIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZHk9Ii4zZW0iPuaXoOS6uuWRmOajgOa1i+eUu+mdojwvdGV4dD4KPC9zdmc+" 
                                 alt="å®æ—¶ç›‘æ§ç”»é¢" class="video-stream">
                            <div class="video-overlay">
                                æ— äººå‘˜æ£€æµ‹
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- è­¦å‘Šä¿¡æ¯é¢æ¿ -->
            <div>
                <div class="card">
                    <h2>ğŸš¨ å®æ—¶è­¦å‘Š</h2>
                    <div id="warningPanel">
                        <div class="alert alert-danger">
                            <strong>ä¸¥é‡è­¦å‘Š</strong><br>
                            æ‘„åƒå¤´#3æ£€æµ‹åˆ°æœªä½©æˆ´å®‰å…¨å¸½äººå‘˜<br>
                            <small>2024-01-15 14:32:15</small>
                        </div>
                        <div class="alert alert-warning">
                            <strong>ä¸€èˆ¬è­¦å‘Š</strong><br>
                            æ‘„åƒå¤´#1æ£€æµ‹åˆ°å¯ç–‘è¡Œä¸º<br>
                            <small>2024-01-15 14:28:42</small>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <h2>ğŸ“Š å®æ—¶ç»Ÿè®¡</h2>
                    <table class="table">
                        <tr>
                            <td>å½“å‰åœ¨çº¿äººå‘˜</td>
                            <td><span id="onlineCount">8</span> äºº</td>
                        </tr>
                        <tr>
                            <td>ä½©æˆ´å®‰å…¨å¸½</td>
                            <td><span style="color: #4CAF50;">6</span> äºº</td>
                        </tr>
                        <tr>
                            <td>æœªä½©æˆ´å®‰å…¨å¸½</td>
                            <td><span style="color: #f44336;">2</span> äºº</td>
                        </tr>
                        <tr>
                            <td>åˆè§„ç‡</td>
                            <td><span id="complianceRate">75%</span></td>
                        </tr>
                    </table>
                </div>

                <div class="card">
                    <h2>âš™ï¸ ç›‘æ§æ§åˆ¶</h2>
                    <div style="display: flex; flex-direction: column; gap: 1rem;">
                        <button class="btn btn-primary" onclick="toggleAllCameras()">ğŸ“¹ å…¨éƒ¨æ‘„åƒå¤´å¼€/å…³</button>
                        <button class="btn btn-warning" onclick="exportWarnings()">ğŸ“¥ å¯¼å‡ºè­¦å‘Šè®°å½•</button>
                        <button class="btn btn-success" onclick="resetAlerts()">ğŸ”„ é‡ç½®è­¦å‘Š</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let warningCount = 0;
        
        /**
         * æ¨¡æ‹Ÿå®æ—¶è­¦å‘Šç”Ÿæˆ
         */
        function generateRandomWarning() {
            const warnings = [
                { type: 'danger', camera: 'æ‘„åƒå¤´#1', message: 'æ£€æµ‹åˆ°æœªä½©æˆ´å®‰å…¨å¸½äººå‘˜' },
                { type: 'warning', camera: 'æ‘„åƒå¤´#2', message: 'æ£€æµ‹åˆ°å¯ç–‘è¡Œä¸º' },
                { type: 'danger', camera: 'æ‘„åƒå¤´#3', message: 'å±é™©åŒºåŸŸæœ‰äººå‘˜æœªä½©æˆ´å®‰å…¨å¸½' },
                { type: 'warning', camera: 'æ‘„åƒå¤´#4', message: 'æ£€æµ‹åˆ°äººå‘˜èšé›†' }
            ];
            
            const randomWarning = warnings[Math.floor(Math.random() * warnings.length)];
            const now = new Date().toLocaleString('zh-CN');
            
            const warningPanel = document.getElementById('warningPanel');
            const newWarning = document.createElement('div');
            newWarning.className = `alert alert-${randomWarning.type}`;
            newWarning.innerHTML = `
                <strong>${randomWarning.type === 'danger' ? 'ä¸¥é‡è­¦å‘Š' : 'ä¸€èˆ¬è­¦å‘Š'}</strong><br>
                ${randomWarning.camera}${randomWarning.message}<br>
                <small>${now}</small>
            `;
            
            warningPanel.insertBefore(newWarning, warningPanel.firstChild);
            
            // ä¿æŒæœ€å¤š5æ¡è­¦å‘Šè®°å½•
            if (warningPanel.children.length > 5) {
                warningPanel.removeChild(warningPanel.lastChild);
            }
            
            // æ’­æ”¾è­¦å‘ŠéŸ³æ•ˆï¼ˆæ¨¡æ‹Ÿï¼‰
            if (randomWarning.type === 'danger') {
                console.log('ğŸš¨ æ’­æ”¾ä¸¥é‡è­¦å‘ŠéŸ³æ•ˆ');
            }
        }
        
        /**
         * åˆ‡æ¢æ‰€æœ‰æ‘„åƒå¤´çŠ¶æ€
         */
        function toggleAllCameras() {
            alert('å·²åˆ‡æ¢æ‰€æœ‰æ‘„åƒå¤´çŠ¶æ€');
        }
        
        /**
         * å¯¼å‡ºè­¦å‘Šè®°å½•
         */
        function exportWarnings() {
            alert('è­¦å‘Šè®°å½•å¯¼å‡ºåŠŸèƒ½ï¼ˆå®é™…é¡¹ç›®ä¸­ä¼šä¸‹è½½CSVæ–‡ä»¶ï¼‰');
        }
        
        /**
         * é‡ç½®è­¦å‘Š
         */
        function resetAlerts() {
            document.getElementById('warningPanel').innerHTML = '<p>æš‚æ— è­¦å‘Šä¿¡æ¯</p>';
            alert('å·²é‡ç½®æ‰€æœ‰è­¦å‘Š');
        }
        
        /**
         * ç”¨æˆ·ç™»å‡ºåŠŸèƒ½
         */
        function logout() {
            if (confirm('ç¡®å®šè¦é€€å‡ºç™»å½•å—ï¼Ÿ')) {
                alert('å·²é€€å‡ºç™»å½•');
            }
        }
        
        /**
         * é¡µé¢åˆå§‹åŒ–
         */
        document.addEventListener('DOMContentLoaded', function() {
            // æ¯10ç§’ç”Ÿæˆä¸€æ¬¡éšæœºè­¦å‘Šï¼ˆæ¨¡æ‹Ÿï¼‰
            setInterval(generateRandomWarning, 10000);
            
            // æ¯5ç§’æ›´æ–°ç»Ÿè®¡æ•°æ®
            setInterval(updateStats, 5000);
        });
        
        /**
         * æ›´æ–°ç»Ÿè®¡æ•°æ®
         */
        function updateStats() {
            const onlineCount = document.getElementById('onlineCount');
            const complianceRate = document.getElementById('complianceRate');
            
            // æ¨¡æ‹Ÿæ•°æ®å˜åŒ–
            const newCount = Math.floor(Math.random() * 5) + 6;
            const newRate = Math.floor(Math.random() * 20) + 80;
            
            onlineCount.textContent = newCount;
            complianceRate.textContent = newRate + '%';
        }
    </script>
</body>
</html>